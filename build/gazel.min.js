((function(){function c(){}function d(){}function g(b,c){if(e){b(e);return}if(f){setTimeout(function(){g(b,c)},100);return}f=!0;var d=window.indexedDB.open(a.dbName,a.version);d.onupgradeneeded=function(b){var c=b.target.result;c.objectStoreNames.contains(a.osName)||c.createObjectStore(a.osName)};var h;h=d.onsuccess=function(g){var i=g.target.result;if(i.setVersion&&Number(i.version)!==a.version){var j=i.setVersion(String(a.version));j.onsuccess=function(a){var b={};b.target={},b.target.result=a.target.result.db,d.onupgradeneeded(b),h(b);return},j.onerror=c,j.onfailure=c,j.onblocked=c;return}e=i,f=!1,b(e)},d.onerror=c}function h(b,c){g(function(d){var e=d.transaction([a.osName],IDBTransaction.READ);e.onerror=c,b(e)},c)}function i(b,c){g(function(d){var e=d.transaction([a.osName],IDBTransaction.READ_WRITE);e.onerror=c,b(e)},c)}"use strict";var a=a||{},b=function(a){return typeof a!="undefined"&&a!=null};window.indexedDB=window.indexedDB||window.mozIndexedDB||window.msIndexedDB||window.webkitIndexedDB||window.oIndexedDB,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction,c.prototype={items:{},prop:function(a){return":"+a},get:function(a,b){var c=this.prop(a),d=this.items;return d.hasOwnProperty(c)?d[c]:b},set:function(a,b){var c=this.prop(a);return this.items[c]=b,b},count:function(){return Object.keys(this.items).length},has:function(a){var b=this.prop(a);return this.items.hasOwnProperty(b)},del:function(a){var b=this.prop(a),c=this.items;c.hasOwnProperty(b)&&delete c[b]}},d.prototype={chain:null,inMulti:!1,returned:[],events:{},register:function(a,b){if(this.inMulti){this.chain.push(a);return}a(b||function(){})},flush:function(){var a=Array.prototype.slice.call(arguments)||[];this.returned.push(a);if(this.chain.length===0){this.complete();return}this.chain.shift().call(this,this.flush)},multi:function(){return this.chain=[],this.inMulti=!0,this},exec:function(a){this.inMulti=!1,this.complete=function(){var b=this.returned;this.complete=null,this.chain=null,this.returned=[],a(b)};var b=this.chain.shift();b.call(this,this.flush)},on:function(a,b){var c=this.events[a]=this.events[a]||[];c.push(b)}},d.prototype.handleError=function(){var a=Array.prototype.slice.call(arguments),b=this.events.error||[];b.forEach(function(b){b.apply(null,a)})},d.prototype.get=function(b,c){var d=this;return this.register(function(c){h(function(e){var f=e.objectStore(a.osName).get(b);f.onerror=d.handleError.bind(d),f.onsuccess=function(a){c.call(d,a.target.result)}},d.handleError.bind(d))},c),this},d.prototype.set=function(b,c,d){var e=this;return this.register(function(d){i(function(f){var g=f.objectStore(a.osName).put(c,b);g.onerror=e.handleError.bind(e),g.onsuccess=function(a){d.call(e,a.target.result)}},e.handleError.bind(e))},d),this},d.prototype.incr=function(a,b,c){return this.register(function(c){this.get(a,function(d){this.set(a,d+b,c)})},c),this},a.print=function(){var a=Array.prototype.slice.call(arguments);if(a.length===0)return;var b=a[0]instanceof Array?a[0]:[a[0]];b.forEach(function(a){console.log(a)})},a.version=1,a.dbName="gazeldb",a.osName="gazelos",a.compatible=b(window.indexedDB)&&b(window.IDBTransaction),a.createClient=function(){return new d},this.gazel=a;var e,f=!1})).call(this);