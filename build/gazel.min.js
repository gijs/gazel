((function(){function c(a,c,d){b(a)&&typeof a=="function"&&a.apply(d||null,c)}function d(){}function e(){}function g(b){if(f){c(b,[f]);return}var e=window.indexedDB.open(a.dbName,a.version);e.onupgradeneeded=function(b){f=b.target.result,f.objectStoreNames.contains(a.osName)||f.createObjectStore(a.osName)},e.onsuccess=function(d){f=d.target.result;if(f.setVersion&&Number(f.version)!==a.version){var g=f.setVersion(a.version);g.onsuccess=function(a){d.target.result=a.target.result.db,e.onupgradeneeded(d),e.onsuccess(d);return};return}c(b,[f])},e.onerror=d}function h(b){g(function(e){var f=e.transaction([a.osName],IDBTransaction.READ);f.onerror=d,c(b,[f])})}function i(b){g(function(e){var f=e.transaction([a.osName],IDBTransaction.READ_WRITE);f.onerror=d,c(b,[f])})}"use strict";var a=a||{},b=function(a){return typeof a!="undefined"&&a!=null};window.indexedDB=window.indexedDB||window.mozIndexedDB||window.msIndexedDB||window.webkitIndexedDB||window.oIndexedDB,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction,e.prototype={chain:null,inMulti:!1,returned:[],events:{},register:function(a,b){if(this.inMulti){this.chain.push(a);return}a(b||function(){})},flush:function(){var a=Array.prototype.slice.call(arguments)||[];this.returned.push(a);if(this.chain.length===0){this.complete();return}this.chain.shift().call(this,this.flush)},multi:function(){return this.chain=[],this.inMulti=!0,this},exec:function(a){this.complete=function(){var b=this.returned;this.complete=null,this.chain=null,this.returned=[],a(b)};var b=this.chain.shift();b.call(this,this.flush)},on:function(a,b){var c=this.events[a]=this.events[a]||[];c.push(b)}},Object.defineProperty(e.prototype,"get",{value:function(b,c){var e=this;return this.register(function(c){h(function(f){var g=f.objectStore(a.osName).get(b);g.onerror=d,g.onsuccess=function(a){c.call(e,a.target.result)}})},c),this},writable:!0,enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"set",{value:function(b,c,e){var f=this;return this.register(function(e){i(function(g){var h=g.objectStore(a.osName).put(c,b);h.onerror=d,h.onsuccess=function(a){e.call(f,a.target.result)}})}),this},writable:!0,enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incr",{value:function(a,b,c){return this.register(function(c){this.get(a,function(d){this.set(a,d+b,c)})},c),this},writable:!0,enumerable:!0,configurable:!0}),a.print=function(){var a=Array.prototype.slice.call(arguments);if(a.length===0)return;var b=a[0]instanceof Array?a[0]:[a[0]];b.forEach(function(a){console.log(a)})},a.version=1,a.dbName="gazeldb",a.osName="gazelos",a.compatible=b(window.indexedDB)&&b(window.IDBTransaction),a.on=function(b,c){return a._events.push({name:b,action:c}),a},a.createClient=function(){return new e},this.gazel=a;var f})).call(this);